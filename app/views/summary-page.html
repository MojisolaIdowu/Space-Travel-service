{% extends "layouts/main.html" %}

{% block pageTitle %}
  Check your answers template – {{ serviceName }} – GOV.UK Prototype Kit
{% endblock %}

{% block beforeContent %}
  {{ govukBackLink({
    text: "Back",
    href: "javascript:window.history.back()"
  }) }}
{% endblock %}

{% from "govuk/components/summary-list/macro.njk" import govukSummaryList %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds-from-desktop">

      <h1 class="govuk-heading-xl">
        Check your answers before sending your application
      </h1>
      
      <dl class="govuk-summary-list">
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key">
            Destination
          </dt>
          <dd class="govuk-summary-list__value">
            {{ data['changedName'] }}
          </dd>
          <dd class="govuk-summary-list__actions">
            <a class="govuk-link" href="destination-page.html">Change<span class="govuk-visually-hidden"> name</span></a>
          </dd>
        </div>
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key">
            Full Name
          </dt>
          <dd class="govuk-summary-list__value">
            {{ data['fullName'] }}
          </dd>
          <dd class="govuk-summary-list__actions">
            <a class="govuk-link" href="details-page.html">Change<span class="govuk-visually-hidden"> Full name</span></a>
          </dd>
        </div>
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key">
            Address
          </dt>
          <dd class="govuk-summary-list__value">
            {{ data['addressLine1'] }}<br>
            {{ data['addressLine2'] }}<br>
            {{ data['addressTown'] }}<br>
            {{ data['addressCounty'] }}<br>
            {{ data['addressPostcode'] }}
          </dd>
          <dd class="govuk-summary-list__actions">
            <a class="govuk-link" href="address-page.html">Change<span class="govuk-visually-hidden"> address</span></a>
          </dd>
        </div>
      
      </dl>

      <h2 class="govuk-heading-m">
        Now send your application
      </h2>

      <p>
        By submitting this application you are confirming that, to the best of your knowledge, the details you are providing are correct.
      </p>

      <form action="/confirmation-page" method="post" novalidate>

        {{ govukButton({
          text: "Accept and send"
        }) }}

      </form>

    </div>
  </div>


  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Get stored values
      const fullName = localStorage.getItem('fullName') || 'Not provided';
      const addressLine1 = localStorage.getItem('addressLine1') || 'Not provided';
      const addressLine2 = localStorage.getItem('addressLine2') || '';
      const addressTown = localStorage.getItem('addressTown') || 'Not provided';
      const addressCounty = localStorage.getItem('addressCounty') || '';
      const addressPostcode = localStorage.getItem('addressPostcode') || 'Not provided';
      const destination = localStorage.getItem('destination') || 'Not provided';
    
      // Display values
      document.getElementById('summaryFullName').textContent = fullName;
      document.getElementById('summaryAddress').textContent = `${addressLine1}, ${addressLine2}, ${addressTown}, ${addressCounty}, ${addressPostcode}`.replace(/,\s+,/g, ',').replace(/,\s*$/, '');
      document.getElementById('summaryDestination').textContent = destination;
    });
    </script>
    
    <div>
      <p><strong>Full Name:</strong> <span id="summaryFullName"></span></p>
      <p><strong>Address:</strong> <span id="summaryAddress"></span></p>
      <p><strong>Destination:</strong> <span id="summaryDestination"></span></p>
    </div>
    

{% endblock %}
